#!/usr/bin/env python
# coding: utf-8

# <div class="alert alert-info">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# –ü—Ä–∏–≤–µ—Ç –°–µ—Ä–≥–µ–π! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ú–∞—Ä–∞—Ç, –∏ —è –±—É–¥—É —Ç–≤–æ–∏–º —Ä–µ–≤—å—é–µ—Ä–æ–º. –ü–æ –ø–æ–≤–æ–¥—É –æ–±—Ä–∞—â–µ–Ω–∏—è - –≤ IT —Å—Ñ–µ—Ä–µ –ø—Ä–∏–Ω—è—Ç–æ –æ–±—â–∞—Ç—å—Å—è –Ω–∞ ¬´—Ç—ã¬ª :) –ù–æ, –µ—Å–ª–∏ –ø—Ä–∏–≤—ã—á–Ω–µ–π –Ω–∞ ¬´–≤—ã¬ª, –¥–∞–π –∑–Ω–∞—Ç—å. –ö–∞–∫ —Ä–µ–≤—å—é–µ—Ä–∞ –º–æ—è –∑–∞–¥–∞—á–∞ –ø–æ–º–æ—á—å —Ç–µ–±–µ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏, –¥–∞–≤ —Ö–æ—Ä–æ—à–∏–µ —Å–æ–≤–µ—Ç—ã. –Ø –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä—é —Ç–≤–æ–π –∫–æ–¥, –æ–∑–Ω–∞–∫–æ–º–ª—é—Å—å —Å —Ç–≤–æ–∏–º–∏ –≤—ã–≤–æ–¥–∞–º–∏ –∏ –æ—Å—Ç–∞–≤–ª—é –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏. –ì–¥–µ —Ç–æ –º–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–¥–µ, –Ω–æ –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤–æ. –ì–¥–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è —É—Ç–æ—á–Ω–µ–Ω–∏—è, —è –æ—Å—Ç–∞–≤–ª—é –º–Ω–æ–≥–æ –Ω–∞–≤–æ–¥—è—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –û–Ω–∏ –ø–æ–º–æ–≥—É—Ç —Ç–µ–±—è —Å –ø–æ–∏—Å–∫–æ–º –≤–µ—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è.
# 
# –í—Å–µ –º–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ä–∞–∑–º–µ—á–µ–Ω—ã –ø–æ —Ü–≤–µ—Ç–∞–º, –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è. 
#     
# <div class="alert alert-success">–ó–µ–ª–µ–Ω—ã–º —Ü–≤–µ—Ç–æ–º –∏ —Å–ª–æ–≤–æ–º ¬´–£—Å–ø–µ—Ö¬ª –æ—Ç–º–µ—á–µ–Ω—ã –æ—Å–æ–±–æ —É–¥–∞—á–Ω—ã–µ –∏ —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–º–∏ —Ç—ã –º–æ–∂–µ—à—å –≥–æ—Ä–¥–∏—Ç—å—Å—è. </div>
#         
# <div class="alert alert-warning">–ñ–µ–ª—Ç—ã–º –∏ –∑–Ω–∞—á–∫–æ–º —Å–ª–æ–≤–æ–º ¬´–°–æ–≤–µ—Ç¬ª, –ø–æ–º–µ—á–µ–Ω—ã —Ä–µ—à–µ–Ω–∏—è —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ. –¢—ã –º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ –∏—Ö —Å—Ä–∞–∑—É –∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–æ–µ–∫—Ç, –∏–ª–∏ –æ—Ç–ª–æ–∂–∏—Ç—å —ç—Ç–æ –Ω–∞ –ø–æ—Ç–æ–º, –¥–ª—è –±—É–¥—É—â–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö. –ü—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –ø—Ä–∏–Ω—è—Ç –∏ –±–µ–∑ –∏—Ö –¥–æ—Ä–∞–±–æ—Ç–∫–∏. </div>
#         
# <div class="alert alert-danger"> –ö—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º –∏ –∑–Ω–∞—á–∫–æ–º —Å–ª–æ–≤–æ–º ¬´–û—à–∏–±–∫–∞¬ª –ø–æ–º–µ—á—É —Ç–≤–æ–∏ —Ä–µ—à–µ–Ω–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ. –ü–æ—Å–ª–µ –∏—Ö –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –ø—Ä–∏–Ω—è—Ç. </div>
#         
# –ó–∞–ª–æ–≥ —É—Å–ø–µ—Ö–∞ - —Ä–∞–±–æ—Ç–∞ —Å–æ–æ–±—â–∞, –≤–∑–∞–∏–º–Ω–æ–µ —É–≤–∞–∂–µ–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞ –≤ –¥–∏–∞–ª–æ–≥–µ. –ü–æ—ç—Ç–æ–º—É, –ø–æ–º–µ—á–∞–π —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ –º–æ–∏ —Ä–µ–ø–ª–∏–∫–∏ –∑–∞–º–µ—Ç–Ω—ã–º —Ü–≤–µ—Ç–æ–º –∏–ª–∏ –∫—É—Ä—Å–∏–≤–æ–º, —Ç–∞–∫ –º–Ω–µ –±—É–¥–µ—Ç –ª–µ–≥—á–µ –∏—Ö –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ –∏–∑–º–µ–Ω—è–π –∏ –Ω–µ —É–¥–∞–ª—è–π –º–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏. –í—Å–µ —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –±—ã—Å—Ç—Ä–µ–π.
# 
# </div>

# <div class="alert alert-danger">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# –û—à–∏–±–∫–∞:
# 
# 
# –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ —Ä–∞–±–æ—Ç—É –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ, —Ç–∞–∫ —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π —Å–º–æ—Ç—Ä–∏—Ç —Ç–≤–æ–π –ø—Ä–æ–µ–∫—Ç (–∏ –Ω–∞ —Ä–∞–±–æ—Ç–µ –≤ —Ç–æ–º —á–∏—Å–ª–µ) –±—É–¥–µ—Ç —Å—Ä–∞–∑—É –≤–≤–µ–¥–µ–Ω –≤ –∫—É—Ä—Å –¥–µ–ª–∞.
# 
# 
# –ú–æ–∂–Ω–æ –ø–æ–π—Ç–∏ –¥–∞–ª—å—à–µ, –≤–Ω–µ–¥—Ä–∏–≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ. –≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –¢—ã –º–æ–∂–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω toc (Table of Contents), —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–≤–æ–µ–º Jupyter Notebook. –í —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —É—á—ë–±—ã" –∫—É—Ä—Å–∞ —Ç—ã –Ω–∞–π–¥–µ—à—å –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ —Ç–æ–º, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.

# –ü–µ—Ä–µ–¥ –Ω–∞–º–∏ —Å—Ç–æ–∏—Ç –∑–∞–¥–∞—á–∞ –ø—Ä–æ–º–∞—Ä–∫–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π. –í –∫–æ–º–ø–∞–Ω–∏–∏ –ø—Ä–∏–Ω—è—Ç–æ –≤—ã–¥–µ–ª—è—Ç—å –¥–≤–∞ —É—Ä–æ–≤–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: ¬´—Å–Ω–∏–∑–∏–ª–∞—Å—å¬ª, –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å—Ç–∞–ª –ø–æ–∫—É–ø–∞—Ç—å –º–µ–Ω—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤, –∏ ¬´–ø—Ä–µ–∂–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å¬ª.
# –ù—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –≥—Ä—É–ø–ø–∞–º:
# –ü—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏ —Å –∫–ª–∏–µ–Ω—Ç–æ–º.
# –ü—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –ø–æ–∫—É–ø–∞–µ—Ç –∏ –∫–∞–∫ —á–∞—Å—Ç–æ.
# –ü—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–∫–æ–ª—å–∫–æ —Ç—Ä–∞—Ç–∏–ª –≤ –º–∞–≥–∞–∑–∏–Ω–µ.
# –ü—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –Ω–∞ —Å–∞–π—Ç–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ –º–Ω–æ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –∏ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç–µ.

# # –ü—Ä–æ–µ–∫—Ç: –û–±—É—á–µ–Ω–∏–µ —Å —É—á–∏—Ç–µ–ª–µ–º: –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏

# –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ \
# –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω ¬´–í –æ–¥–∏–Ω –∫–ª–∏–∫¬ª –ø—Ä–æ–¥–∞—ë—Ç —Ä–∞–∑–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã: –¥–ª—è –¥–µ—Ç–µ–π, –¥–ª—è –¥–æ–º–∞, –º–µ–ª–∫—É—é –±—ã—Ç–æ–≤—É—é —Ç–µ—Ö–Ω–∏–∫—É, –∫–æ—Å–º–µ—Ç–∏–∫—É –∏ –¥–∞–∂–µ –ø—Ä–æ–¥—É–∫—Ç—ã. –û—Ç—á—ë—Ç –º–∞–≥–∞–∑–∏–Ω–∞ –∑–∞ –ø—Ä–æ—à–ª—ã–π –ø–µ—Ä–∏–æ–¥ –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –Ω–∞—á–∞–ª–∞ —Å–Ω–∏–∂–∞—Ç—å—Å—è. –ü—Ä–∏–≤–ª–µ–∫–∞—Ç—å –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ —É–∂–µ –Ω–µ —Ç–∞–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ: –æ –º–∞–≥–∞–∑–∏–Ω–µ –∏ —Ç–∞–∫ –∑–Ω–∞–µ—Ç –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏. –í–æ–∑–º–æ–∂–Ω—ã–π –≤—ã—Ö–æ–¥ ‚Äî —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤. –°–¥–µ–ª–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.
# ¬´–í –æ–¥–∏–Ω –∫–ª–∏–∫¬ª ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è, –ø–æ—ç—Ç–æ–º—É –µ—ë —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –Ω–µ —Ö–æ—á–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ ‚Äî —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è. –£ –∫–æ–º–ø–∞–Ω–∏–∏ –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç–¥–µ–ª —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –∏ –≤–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –ø–æ–±—ã—Ç—å –≤ —Ä–æ–ª–∏ —Å—Ç–∞–∂—ë—Ä–∞ –≤ —ç—Ç–æ–º –æ—Ç–¥–µ–ª–µ. 
# –ò—Ç–∞–∫, –≤–∞—à–µ–º—É –æ—Ç–¥–µ–ª—É –ø–æ—Ä—É—á–∏–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å –∏—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.

# <a href='#sec1'>–®–∞–≥ 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</a>\
# <a href='#sec1.1'> –®–∞–≥ 1.1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤</a>\
# <a href='#sec1.2'> –®–∞–≥ 1.2. –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö</a>\
# <a href='#sec2'>–®–∞–≥ 2. –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</a>\
# <a href='#sec3'>–®–∞–≥ 3. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö</a>\
# <a href='#sec4'>–®–∞–≥ 4. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü</a>\
# <a href='#sec5'>–®–∞–≥ 5. –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑</a>\
# <a href='#sec6'>–®–∞–≥ 6. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤</a>\
# <a href='#sec7'>–®–∞–≥ 7. –ê–Ω–∞–ª–∏–∑ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</a>\
# <a href='#sec8'>–®–∞–≥ 8. –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</a>\
# <a href='#sec9'>–®–∞–≥ 9. –û–±—â–∏–π –≤—ã–≤–æ–¥</a>
# 

# In[1]:


#–ö–æ–¥ —Ä–µ–≤—å—é–µ—Ä–∞
get_ipython().system(' pip install phik')
get_ipython().system(' pip install shap')
get_ipython().system('pip install -U scikit-learn')


# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

# In[2]:


import pandas as pd
import copy
import numpy
import matplotlib.pyplot as plt
import seaborn as sns
from scipy import stats as st
from scipy.stats import shapiro
import numpy as np
import plotly.express as px
import matplotlib.colors as mcolors
import sklearn
from sklearn.model_selection import train_test_split, GridSearchCV, RandomizedSearchCV
from sklearn.linear_model import LinearRegression
from sklearn.preprocessing import (
    OneHotEncoder,
    OrdinalEncoder,
    StandardScaler,
    MinMaxScaler,
    RobustScaler,
    PolynomialFeatures
)
from sklearn.tree import DecisionTreeClassifier
from sklearn.metrics import (
    mean_absolute_error, 
    r2_score, 
    mean_squared_error, 
    mean_absolute_error, 
    recall_score, 
    precision_score, 
    roc_auc_score,
    confusion_matrix,
    f1_score
)
from sklearn.linear_model import LogisticRegression
from sklearn.svm import SVC
from sklearn.neighbors import KNeighborsClassifier
from sklearn.tree import DecisionTreeClassifier
from sklearn.ensemble import RandomForestClassifier
from sklearn.svm import LinearSVC
import phik
from phik.report import plot_correlation_matrix
from phik import report
from sklearn.pipeline import Pipeline
from sklearn.compose import ColumnTransformer
from sklearn.impute import SimpleImputer
import shap
from sklearn.inspection import permutation_importance
from sklearn.preprocessing import PolynomialFeatures
from sklearn.feature_selection import SelectKBest, f_classif
from scipy.cluster.hierarchy import dendrogram, linkage


# 
# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# –£—Å–ø–µ—Ö:
# 
# –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏, —á—Ç–æ–±—ã –ª–µ–≥—á–µ –±—ã–ª–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. 
# 
#     
# <div class="alert alert-warning">
#  
# 
# –°–æ–≤–µ—Ç ü§î:
# 
# –°–º–æ—Ç—Ä–∏ —á—Ç–æ  –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–æ–≥–ª–∞—Å–Ω–æ PEP-8.  –í–º–µ—Å—Ç–æ
#     
# 
#     from sklearn.model_selection import cross_val_score
#     from sklearn.model_selection import train_test_split
#     from sklearn.model_selection import StratifiedKFold
#     from sklearn.model_selection import GridSearchCV
#     
# 
# –ü–∏—à–µ–º –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é    
# 
#     
#     from sklearn.model_selection import cross_val_score,  train_test_split, ...
#     
#     
# 
# –ï—Å–ª–∏ –∑–∞–ø–∏—Å—å –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–π, —ç—Ç–æ —Ç–æ–∂–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç PEP8, —Ç–æ–≥–¥–∞ —Å–∫–æ–±–æ—á–∫–∏:
# 
# 	from sklearn.metrics import (
# 	   accuracy_score, 
#  	   confusion_matrix, 
# 	   r2_score,
#  	   precision_score,
#  	   recall_score
# 	)
# 
# 
# 
# –í–æ-–≤—Ç–æ—Ä—ã—Ö –≤–∏–¥–∏—à—å —É —Ç–µ–±—è –µ—Å—Ç—å pip install. –î–æ–ø—É—Å—Ç–∏–º:
#     
#     
#     # pip install nltk # –¥–æ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
#     # pip install pywsd
#     # pip install transformers  
#     
#     
#     
# –≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ —É –Ω–∞—Å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∑–Ω–∞—á–∏—Ç    
# 
#     
#     
#     import transformers
#     
# –∏—Ç–¥
#     
# —Å—Ç–∞–≤–∏–º –≤ —Å–∞–º—ã–π –∫–æ–Ω–µ—Ü    
#     
# –ü–æ –∞–Ω–∞–ª–æ–≥–∏–∏ –º–æ–∂–µ—à—å –∏—Å–ø—Ä–∞–≤–∏—Ç—å  
# 
# 

# <a id='sec1'></a>
# ## –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

# <a id='sec1.1'></a>
# ### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

# In[3]:


market_file = pd.read_csv('/datasets/market_file.csv', sep=',')
market_money = pd.read_csv('/datasets/market_money.csv', sep=',')
market_time = pd.read_csv('/datasets/market_time.csv', sep=',')
money = pd.read_csv('/datasets/money.csv', sep=';', decimal=',')


# <a id='sec1.2'></a>
# ### –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

# In[4]:


market_file.info()


# In[5]:


market_file.head(20)


# In[6]:


market_money.info()


# In[7]:


market_money.head(20)


# In[8]:


market_time.info()


# In[9]:


market_time.head(20)


# In[10]:


money.info()


# In[11]:


money.head(20)


# –î–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–ø–∏—Å–∞–Ω–∏—é, –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ

# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# –£—Å–ø–µ—Ö:
# 
# –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –æ–±–∑–æ—Ä –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ–¥—ë–Ω
#     
#     
# 

# <a id='sec2'></a>
# ## –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

# In[12]:


market_file.isna().sum()


# In[13]:


market_file.duplicated().sum()


# In[14]:


market_file['–ü–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å'].unique()


# In[15]:


market_file['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'].unique()


# In[16]:


market_file['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'] = market_file['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'].str.replace('—Å—Ç–∞–Ω–¥–∞—Ä—Ç—Ç', '—Å—Ç–∞–Ω–¥–∞—Ä—Ç')


# In[17]:


market_file['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'].unique()


# –£–±—Ä–∞–ª –Ω–µ—è–≤–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã

# In[18]:


market_money.isna().sum()


# In[19]:


market_money.duplicated().sum()


# In[20]:


market_time.isna().sum()


# In[21]:


market_time.duplicated().sum()


# In[22]:


market_time['–ü–µ—Ä–∏–æ–¥'].unique()


# In[23]:


market_time['–ü–µ—Ä–∏–æ–¥'] = market_time['–ü–µ—Ä–∏–æ–¥'].str.replace('–ø—Ä–µ–¥—ã–¥—Ü—â–∏–π_–º–µ—Å—è—Ü', '–ø—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü')


# In[24]:


market_time['–ü–µ—Ä–∏–æ–¥'].unique()


# –ò—Å–ø—Ä–∞–≤–∏–ª –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –∏–±–æ —Å–∏–ª—å–Ω–æ –±—Ä–æ—Å–∞–ª–∏—Å—å –≤ –≥–ª–∞–∑–∞

#     
# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –£—Å–ø–µ—Ö:
# 
# 
#     
# - –ó–¥–æ—Ä–æ–≤–æ —á—Ç–æ –æ–±—Ä–∞—â–µ–Ω–æ –≤–Ω–∏–º–∞–Ω–∏–µ  —Å–∫—Ä—ã—Ç—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã, –∏ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–∞–π–¥–µ–Ω—ã    
#     
# 
# 
# 
# 

# In[25]:


money.isna().sum()


# In[26]:


money.duplicated().sum()


# 
#  <div class="alert alert-warning">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# –°–æ–≤–µ—Ç: 
# 
# 
# –ù–µ–ø–ª–æ—Ö–æ –±—ã –ø—Ä–∏–≤–µ–∑—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤ –∫ –∑–º–µ–∏–Ω–æ–º—É –≤–∏–¥—É. –ú–æ–∂–Ω–æ  –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Å—å  .lower, –∞ —Å –ø–æ–º–æ—â—å—é —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏–∏    (–∏–ª–∏ .rename) –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Ç–æ—á–µ–∫, % –∏—Ç–ø, –∞ –µ—Å–ª–∏ –Ω–∞–¥–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –Ω–∏–∂–Ω–∏–µ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ (–ø—Ä–∏–≤–µ–∑—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤ –∫ –∑–º–µ–∏–Ω–æ–º—É –∫–æ–¥—É). –ü—Ä–∏–º–µ—Ä —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è:  
#      
# 

# <a id='sec3'></a>
# ## –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

# In[27]:


market_file['–ü–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_file['–ü–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å'].value_counts())


# In[28]:


market_file['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ —Ç–∏–ø–µ —Å–µ—Ä–≤–∏—Å–∞', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_file['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'].value_counts())


# In[29]:


market_file['–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–∞—Ç—å'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏—Å—ã–ª–∞—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ —Ç–æ–≤–∞—Ä–µ', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_file['–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–∞—Ç—å'].value_counts())


# In[30]:


market_file.hist('–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å', bins=10, figsize=(10,7))
plt.xlabel('–°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –∫–æ–º–ø–∞–Ω–∏–∏')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_file.boxplot(column=['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å'], figsize=(10,7), grid=True)
plt.xlabel('–°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –∫–æ–º–ø–∞–Ω–∏–∏')
plt.show()

print(market_file['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å'].describe())

statistic, p_value = shapiro(market_file['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# –£—Å–ø–µ—Ö:
# 
#     
# –ò–∑ –ø–ª—é—Å–æ–≤:    
#     
#     
# - –ü—Ä–∞–≤–∏–ª—å–Ω–æ —á—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—à—å –ø—Ä–∞–∫—Ç–∏–∫—É —Å –ø—Ä–æ—à–ª–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å—Ç—Ä–æ–∏—à—å 2 —Ç–∏–ø–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ 
# 
#     
#     
# - –î–ª—è  —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—à—å  —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≥—Ä–∞—Ñ–∏–∫–∏
#     
# 
# - –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–∞–¥–ø–∏—Å–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç    
# 
#     
#     
# - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—à—å –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é —Ç–µ—Å—Ç–∞ –®–∞–ø–∏—Ä–æ    
#     
# <div class="alert alert-warning">
# 
# 
# –°–æ–≤–µ—Ç ü§î:
# 
#    
# - –º–æ–∂–Ω–æ –ø–æ–π—Ç–∏ –¥–∞–ª—å—à–µ  –∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Å–¥–µ–ª–∞—Ç—å —Ä–∞–∑–±–∏–≤–∫—É –ø–æ —Ç–∞—Ä–≥–µ—Ç—É. –¢–∞–∫ –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–∞—à–∏—Ö –¥–∞–Ω–Ω—ã–µ, –º–æ–∂–µ—Ç —á—Ç–æ-—Ç–æ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å seaborn, —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –∞—Ä–≥—É–º–µ–Ω—Ç–∞ [hue](https://www.statology.org/seaborn-histogram-hue/). –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º—ã –ø–æ–ª—É—á–∏–º –Ω–∞–ª–æ–∂–µ–Ω–Ω—ã–µ (–≤ —Ä–∞–∑–±–∏–≤–∫–∏ –ø–æ —Ç–∞—Ä–≥–µ—Ç—É) 2 –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã (boxplot —Ç–æ–∂–µ –Ω–µ–ø–ª–æ—Ö–æ –¥–æ–±–∞–≤–∏—Ç—å) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞. –ò –æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –Ω–µ–∑–∞–±—ã–≤–∞–µ–º. –ë—É–¥–µ—Ç –∫—Ä–∞—Å–∏–≤–æ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ.
# 
#     
#     
# - –ø–æ–¥—É–º–∞–π –æ –ª—É—á—à–µ–º —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤, —Å–µ–π—á–∞—Å —ç—Ç–æ –¥–ª–∏–Ω–Ω—ã–π —Ä—è–¥ –≥—Ä–∞—Ñ–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–¥–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å –≤–Ω–∏–∑, –ø–æ—á–µ–º—É –±—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [subplots](https://nagornyy.me/it/vizualizatsiia-dannykh-v-matplotlib/) –∏ –Ω–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –µ—â–µ –∏ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –≤ –¥–≤–∞ –∏–ª–∏ —Ç—Ä–∏ —Å—Ç–æ–ª–±—Ü–∞!? 
# 
# 
#     
# - –∞ –µ—â—ë –±—ã  –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É    [seaborn](https://nagornyy.me/it/vizualizatsiia-dannykh-v-seaborn/), –æ–Ω–∞ —Å—Ç—Ä–æ–∏—Ç  —Å–∏–º–ø–∞—Ç–∏—á–Ω–µ–µ –∏ –ø—Ä–æ—â–µ matplotlib. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å matplotlib —ç—Ç–æ –∫–∞–∫ –≤—ã—É—á–∏—Ç—å—Å—è –Ω–∞ –º–µ—Ö–∞–Ω–∏–∫–µ, –Ω–æ –µ—Å–ª–∏ —É–º–µ–µ—à—å –Ω–∞ –º–µ—Ö–∞–Ω–∏–∫–µ –Ω–æ –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–µ (seaborn) —Ç–æ—á–Ω–æ –ø–æ–ª—É—á–∏—Ç—Å—è. –ï—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –æ—Ç–ª–∏—á–∏—è –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –≥—Ä–∞—Ñ–∏–∫–∞—Ö, –∏ —Ñ–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö, –Ω–æ —ç—Ç–æ –º–µ–ª–æ—á–∏
#     
#    
#     
# - –ü–æ—Å–æ–≤–µ—Ç–æ–≤–∞–ª –±—ã –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö. –í–µ–¥—å –º—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑ —Å—Ç—Ä–æ–∏–º –≥—Ä–∞—Ñ–∏–∫–∏    

# In[31]:


market_file.hist('–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å', bins=3, figsize=(10,7))
plt.xlabel('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –≤ —Ç–µ–∫—É—â–µ–º –º–µ—Å—è—Ü–µ')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_file.boxplot(column=['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å'], figsize=(10,7), grid=True)
plt.xlabel('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –≤ —Ç–µ–∫—É—â–µ–º –º–µ—Å—è—Ü–µ')
plt.show()

print(market_file['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å'].describe())

statistic, p_value = shapiro(market_file['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# In[32]:


market_file.hist('–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', bins=100, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–æ—à–ª–æ —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –Ω–∞ —Å–∞–π—Ç–µ')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_file.boxplot(column=['–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å'], figsize=(10,7), grid=True)
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–æ—à–ª–æ —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –Ω–∞ —Å–∞–π—Ç–µ')
plt.show()

print(market_file['–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å'].describe())

statistic, p_value = shapiro(market_file['–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# In[33]:


market_file.hist('–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏', bins=15, figsize=(10,7))
plt.xlabel('–°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–∞—è –¥–æ–ª—è –ø–æ–∫—É–ø–æ–∫ –ø–æ –∞–∫—Ü–∏–∏ –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –ø–æ–∫—É–ø–æ–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_file.boxplot(column=['–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏'], figsize=(10,7), grid=True)
plt.xlabel('–°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–∞—è –¥–æ–ª—è –ø–æ–∫—É–ø–æ–∫ –ø–æ –∞–∫—Ü–∏–∏ –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –ø–æ–∫—É–ø–æ–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤')
plt.show()

print(market_file['–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏'].describe())

statistic, p_value = shapiro(market_file['–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# In[34]:


market_file['–ü–æ–ø—É–ª—è—Ä–Ω–∞—è_–∫–∞—Ç–µ–≥–æ—Ä–∏—è'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ —Å–∞–º–æ–π –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_file['–ü–æ–ø—É–ª—è—Ä–Ω–∞—è_–∫–∞—Ç–µ–≥–æ—Ä–∏—è'].value_counts())


# In[35]:


market_file.hist('–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç', bins=6, figsize=(10,7))
plt.xlabel('–°–∫–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª –∑–∞ –≤–∏–∑–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ—Å—è—Ü–∞')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_file.boxplot(column=['–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç'], figsize=(10,7), grid=True)
plt.xlabel('–°–∫–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª –∑–∞ –≤–∏–∑–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ—Å—è—Ü–∞')
plt.show()

print(market_file['–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç'].describe())

statistic, p_value = shapiro(market_file['–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# In[36]:


market_file.hist('–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª', bins=10, figsize=(10,7))
plt.xlabel('–û–±—â–µ–µ —á–∏—Å–ª–æ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_file.boxplot(column=['–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª'], figsize=(10,7), grid=True)
plt.xlabel('–û–±—â–µ–µ —á–∏—Å–ª–æ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞')
plt.show()

print(market_file['–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª'].describe())

statistic, p_value = shapiro(market_file['–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# In[37]:


market_file.hist('–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞', bins=10, figsize=(10,7))
plt.xlabel('–ß–∏—Å–ª–æ —Å–±–æ–µ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ—Å–Ω—É–ª–∏—Å—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –≤–æ –≤—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è —Å–∞–π—Ç–∞')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_file.boxplot(column=['–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞'], figsize=(10,7), grid=True)
plt.xlabel('–ß–∏—Å–ª–æ —Å–±–æ–µ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ—Å–Ω—É–ª–∏—Å—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –≤–æ –≤—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è —Å–∞–π—Ç–∞')
plt.show()

print(market_file['–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞'].describe())

statistic, p_value = shapiro(market_file['–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# In[38]:


market_file.hist('–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç', bins=10, figsize=(10,7))
plt.xlabel('–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –∑–∞ –æ–¥–∏–Ω –≤–∏–∑–∏—Ç –Ω–∞ —Å–∞–π—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_file.boxplot(column=['–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç'], figsize=(10,7), grid=True)
plt.xlabel('–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –∑–∞ –æ–¥–∏–Ω –≤–∏–∑–∏—Ç –Ω–∞ —Å–∞–π—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞')
plt.show()

print(market_file['–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç'].describe())

statistic, p_value = shapiro(market_file['–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# In[39]:


market_money.head(10)


# In[40]:


market_money['–ü–µ—Ä–∏–æ–¥'].value_counts().plot(title='–ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞, –≤–æ –≤—Ä–µ–º—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –≤—ã—Ä—É—á–∫–∞', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_money['–ü–µ—Ä–∏–æ–¥'].value_counts())


# In[41]:


market_money_new = market_money.pivot(index='id', columns='–ü–µ—Ä–∏–æ–¥', values='–í—ã—Ä—É—á–∫–∞')
market_money_new.columns = ['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', '–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', '–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞']
market_money_new.head()


# In[42]:


market_money_new.hist('–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=20, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_money_new.boxplot(column=['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'], figsize=(10,7), grid=True)
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()

print(market_money_new['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())

statistic, p_value = shapiro(market_money_new['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
    
market_money_new.hist('–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=20, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_money_new.boxplot(column=['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'], figsize=(10,7), grid=True)
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()

print(market_money_new['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())

statistic, p_value = shapiro(market_money_new['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
    
market_money_new.hist('–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=5, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_money_new.boxplot(column=['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'], figsize=(10,7), grid=True)
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()

print(market_money_new['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())

statistic, p_value = shapiro(market_money_new['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# –ë—ã–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∞–Ω–æ–º–∞–ª—å–Ω–æ –±–æ–ª—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∏–∑–±–∞–≤–∏–º—Å—è –æ—Ç –Ω–∏—Ö

# In[43]:


market_money_new = market_money_new[market_money_new['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'] < 20000]


# In[44]:


market_money_new.hist('–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=5, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_money_new.boxplot(column=['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'], figsize=(10,7), grid=True)
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()

print(market_money_new['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())

statistic, p_value = shapiro(market_money_new['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# –ë–µ–∑ –∞–Ω–æ–º–∞–ª–∏–π —Å—Ç–∞–ª–æ –≥–æ—Ä–∞–∑–¥–æ –ª—É—á—à–µ

# <div class="alert alert-danger">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –û—à–∏–±–∫–∞ ‚ùå:
# 
# 
# 
# 
# 
# –ê —á—Ç–æ –º—ã –µ—â—ë –∑–¥–µ—Å—å –≤–∏–¥–∏–º –∫—Ä–æ–º–µ –Ω–µ–Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è?

# In[45]:


market_time['–ü–µ—Ä–∏–æ–¥'].value_counts().plot(title='–ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞, –≤–æ –≤—Ä–µ–º—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –æ–±—â–µ–µ –≤—Ä–µ–º—è', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_time['–ü–µ—Ä–∏–æ–¥'].value_counts())


# In[46]:


market_time_new = market_time.pivot(index='id', columns='–ü–µ—Ä–∏–æ–¥', values='–º–∏–Ω—É—Ç')
market_time_new.columns = ['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã', '–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã']
market_time_new.head()


# In[47]:


market_time_new.hist('–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã', bins=15, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ, –≤ –º–∏–Ω—É—Ç–∞—Ö')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_time_new.boxplot(column=['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'], figsize=(10,7), grid=True)
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ, –≤ –º–∏–Ω—É—Ç–∞—Ö')
plt.show()

print(market_time_new['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'].describe())

statistic, p_value = shapiro(market_time_new['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
    
market_time_new.hist('–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã', bins=20, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ, –≤ –º–∏–Ω—É—Ç–∞—Ö')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
market_time_new.boxplot(column=['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'], figsize=(10,7), grid=True)
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ, –≤ –º–∏–Ω—É—Ç–∞—Ö')
plt.show()

print(market_time_new['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'].describe())

statistic, p_value = shapiro(market_time_new['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# In[48]:


money.hist('–ü—Ä–∏–±—ã–ª—å', bins=20, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏')
plt.show()

display('–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–∞—Ö–∞')
money.boxplot(column=['–ü—Ä–∏–±—ã–ª—å'], figsize=(10,7), grid=True)
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏')
plt.show()

print(money['–ü—Ä–∏–±—ã–ª—å'].describe())

statistic, p_value = shapiro(money['–ü—Ä–∏–±—ã–ª—å'])
if p_value < 0.05: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")
else: 
    print("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ")


# 
# <div class="alert alert-warning">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –°–æ–≤–µ—Ç:
# 
#     
# - –¥–ª—è –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º –ø–æ –≤—ã—Ä—É—á–∫–µ –∏ –º–∏–Ω—É—Ç–∞–º, —Å—Ç–æ–∏—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –ø–æ "–ø–µ—Ä–∏–æ–¥" (—É –Ω–∞—Å –±—É–¥–µ—Ç 3 –≥—Ä–∞—Ñ–∏–∫–∞ –ø–æ –≤—ã—Ä—É—á–∫–µ –∏ 2 –ø–æ –º–∏–Ω—É—Ç–∞–º), —ç—Ç–æ —Ä–∞–∑—É–º–Ω–æ, –≤–µ–¥—å –∏–º–µ–Ω–Ω–æ –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö      

# <a id='sec4'></a>
# ## –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

# In[49]:


market_all = market_file.merge(market_money_new, on=['id'])
market_all = market_all.merge(market_time_new, on=['id'])
market_all.reset_index()
market_all.head(10)


# In[50]:


market_all = market_all[market_all['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'] > 0]
market_all = market_all[market_all['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'] > 0]
market_all = market_all[market_all['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'] > 0]
market_all.head()


# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –£—Å–ø–µ—Ö üëç:
# 
# 
# 
# - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã
# 
# 
# 
# - –Ω–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã —É–±—Ä–∞–Ω—ã
# 
# 
# 
#  

# <a id='sec5'></a>
# ## –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

# In[51]:


market_all.head(10)


# In[52]:


market_all_new = market_all.drop('id', axis=1)
interval_cols = ['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å', '–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å', '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏', '–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç', '–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª', '–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞', '–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç', '–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', '–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', '–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', '–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã', '–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã']
phik_overview = market_all_new.phik_matrix(interval_cols=interval_cols)
plot_correlation_matrix(
    phik_overview.values,
    x_labels=phik_overview.columns,
    y_labels=phik_overview.index,
    title=r"correlation $\phi_K$",
    fontsize_factor=1.5,
    figsize=(25, 25)
)


# 
# 
# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –£—Å–ø–µ—Ö üëç:
# 
# 
# 
# 
# 
# 
# - –∑–¥–æ—Ä–æ–≤–æ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω phik, –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ç–æ–ª —É–∫–∞–∑—ã–≤–∞–µ—à—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ —á–µ—Ä–µ–∑ interval_cols
# 
# 
# 
# 
# 
# 
# 
# <div class="alert alert-warning">
# 
# 
# –°–æ–≤–µ—Ç: 
# 
#     
#     
#     
# 
# - –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –ø–æ–ª–∏—Ç—Ä—É –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è, —á–µ—Ä–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ cmap='coolwarm' ('bwr', 'seismic'), —Ç–æ–≥–¥–∞ —á–µ–º –±–ª–∏–∂–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∫ 1 —Ç–µ–º –∫—Ä–∞—Å–Ω–µ–π, —á–µ–º –±–ª–∏–∂–µ –∫ -1 —Ç–µ–º "—Å–∏–Ω–µ–π" , –Ω—É –∏ —á–µ–º –º–µ–Ω—å—à–µ —Å–≤—è–∑–∏, —á–µ–º –±–ª–∏–∂–µ –∫ 0, —Ç–µ–º –Ω–µ–π—Ç–∞–ª—å–Ω–µ–π —Ü–≤–µ—Ç
# 
# 
# - –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ  –º–∞—Ç—Ä–∏—Ü—ã –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π –¥–ª—è –¥–≤—É—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ —Ä–∞–∑–±–∏—Ç—ã—Ö –ø–æ —Ç–∞—Ä–≥–µ—Ç—É. –ó–∞—Ç–µ–º –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ—Å—Ç—å –ª–∏ –æ—Ç–ª–∏—á–∏—è –≤ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–∞—à–µ–π –¥–∞–Ω–Ω—ã—Ö
#  
#     
#     
# - –∫ —ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ —è –±—ã —É–∂–µ —É–±—Ä–∞–ª id, –≤–µ–¥—å —ç—Ç–æ  –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –∏ –≤—Ä—è–¥ –ª–∏ –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω —Å —Ç–∞—Ä–≥–µ—Ç–æ–º (–µ—Å–ª–∏ –∫–æ–Ω–µ—á–Ω–æ —Ç–∞–º –Ω–µ—Ç –∫–∞–∫–æ–π —Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π). –ù–æ —Ä–∞–∑ –ø–æ—Å—á–∏—Ç–∞–ª –º–æ–∂–µ—à—å –ø–µ–¥–ª–æ–∂–∏—Ç—å –≤–µ—Ä—Å–∏—é —Ç–∞–∫–æ–π –≤—ã—Å–æ–∫–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏?
# 
# 
# 
# –í –ø—Ä–æ—à–ª–æ–º –ø—Ä–æ–µ–∫—Ç–µ –º—ã –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ scatter_plot –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –∏ —É–¥–æ–µ–º, –∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–≤–∏–¥–µ–Ω–Ω–æ–≥–æ —Å–¥–µ–ª–∞–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –ø–æ–º–æ–≥–∞—é—â–∏–µ –ø—Ä–µ–æ–¥–æ–ª–µ—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ª–∏–Ω–µ–π–Ω–æ–π –º–æ–¥–µ–ª–∏. –í —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, –∏ —Ç–∞—Ä–≥–µ—Ç —É –Ω–∞—Å –Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–π. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ –∏ –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å scatter_plot –º–µ–∂–¥—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏, –∞ —Ç–∞—Ä–≥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å  –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–∏–ª—å—Ç—Ä–∞. –ù–∞–ø–æ–º–Ω—é —á—Ç–æ –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é [sns.PairGrid](https://seaborn.pydata.org/generated/seaborn.PairGrid.html). –≠—Ç–æ –Ω–µ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –Ω–∞–º –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ –º—ã —É–≤–∏–¥–∏–º —á—Ç–æ —Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö. 
# 
# - –ú–æ–∂–Ω–æ c –ø–æ–º–æ—â—å—é scatter_plot —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –≤—ã—Ä—É—á–∫–∞ —Ç–µ–∫—É—â–∞—è - –≤—ã—Ä—É—á–∫–∞ –∑–∞ –ø—Ä–æ—à–ª—ã–π. –¢–∞–º —è–≤–Ω–∞—è –ª–∏–Ω–µ–π–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –ø—Ä–∏—á–µ–º –∫–∞–∫ –±—É–¥—Ç–æ –±—ã –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ —Ç—è–≥–æ—Ç–µ—é—Ç –∫ –¥–≤—É–º –ø—Ä—è–º—ã–º. –ú–æ–∂–Ω–æ –ø–æ–∏—Å–∫–∞—Ç—å —Ñ–∞–∫—Ç–æ—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —ç—Ç–∏ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –º–Ω–æ–∂–µ—Å—Ç–≤–∞. –ú–æ–∂–Ω–æ –∫ –≤—ã—Ä—É—á–∫–µ –∑–∞ –ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü –¥–æ–±–∞–≤–∏—Ç—å –≤—ã—Ä—É—á–∫—É –∑–∞ –ø–æ–∑–∞–ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü (–∏–ª–∏ –æ—Ç–Ω—è—Ç—å) –∏ —Ç–æ–≥–¥–∞ –≤ –∫–∞–∫–∏—Ö —Ç–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞—Ö –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–º –ø—Ä–∏–∑–Ω–∞–∫–∞–º –±—É–¥–µ—Ç –æ—á–µ–Ω—å —á–µ—Ç–∫–∞—è –ª–∏–Ω–µ–π–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞—é—â–∞—è –ø–æ r2 –∑–∞ 0.9. –ò–∑ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥ —á—Ç–æ  –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞—Ö, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É –≤—ã—Ä—É—á–∫–∞–º–∏ –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –¥–µ—Ä–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∞ (–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å r2), —Ç–æ –µ—Å—Ç—å –∏–∑ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø—Ä–æ—à–ª—ã–π (–∏ —Å —É—á–µ—Ç–æ–º –ø–æ–∑–∞–ø—Ä–æ—à–ª–æ–≥–æ –º–µ—Å—è—Ü–∞) –º—ã –º–æ–∂–µ–º —Ç–æ—á–Ω–æ —Å–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü. –û —á–µ–º —ç—Ç–æ –º–æ–∂–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å? 
# 
# 
# 
# - –ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å scatter_plot –º–µ–∂–¥—É id –∏ –∞–∫—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø–æ–∫—É–ø–∫–∞–º–∏. –ú–æ–∂–Ω–æ –∫–æ–µ —á—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ —É–≤–∏–¥–µ—Ç—å –∏ –¥–∞—Ç—å —ç—Ç–æ–º—É –æ–±—å—è—Å–Ω–µ–Ω–∏–µ
# 

# –ü—Ä–∏–∑–Ω–∞–∫ "–ü–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å": 
# - –ò–º–µ–µ—Ç –≤—ã—Å–æ–∫—É—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é —Å –ø—Ä–∏–∑–Ω–∞–∫–æ–º: "–°—Ç—Ä–∞–Ω–∏—Ü –∑–∞ –≤–∏–∑–∏—Ç"
# - –ò–º–µ–µ—Ç –∑–∞–º–µ—Ç–Ω—É—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é —Å –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏: "–ú–∞—Ä–∫–µ—Ç –∞–∫—Ç–∏–≤ 6 –º–µ—Å", "–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏", "–°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–∞ –≤–∏–∑–∏—Ç", "–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã —à—Ç—É–∫ –∫–≤–∞—Ä—Ç–∞–ª", "–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü –≤—ã—Ä—É—á–∫–∞", "–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü –º–∏–Ω—É—Ç—ã", "–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü –º–∏–Ω—É—Ç—ã"
# - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –ª–∏–±–æ –∏–º–µ—é—Ç —Å–ª–∞–±—É—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é, –ª–∏–±–æ –≤–æ–æ–±—â–µ –Ω–µ –∏–º–µ—é—Ç.
# –ú—É–ª—å—Ç–∏–∫–æ–ª–ª–∏–Ω–µ–∞—Ä–Ω–æ—Å—Ç—å —É –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –ø—Ä–∏—Å—É—Ç–≤—É–µ—Ç

# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V2</b></font>
# 
# 
# 
# –£—Å–ø–µ—Ö üëç:
# 
# 
# 
# –î–æ–ø–æ–ª–Ω–∏–ª
# 

# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V2</b></font>
# 
# 
# 
# –£—Å–ø–µ—Ö üëç:
# 
# 
# –ü—Ä–∏–Ω—è—Ç–æ
# 
# 
# </div>
# 

# 
# <div class="alert alert-danger">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# –û—à–∏–±–∫–∞:
# 
# –ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞, –Ω–æ –Ω–µ—Ç –ø–æ–ª–Ω—ã—Ö –≤—ã–≤–æ–¥–æ–≤ –ø–æ –Ω–µ–π, —á—Ç–æ –∫—Ä–æ–º–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –º—ã –Ω–∞ –Ω–µ–π –≤–∏–¥–∏–º? –î–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Ç —Å–∏–ª—å–Ω–æ–π —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø—Ä–∏–∑–Ω–∞–∫-—Ç–∞—Ä–≥–µ—Ç, –æ–± —ç—Ç–æ–º —Ç–æ–∂–µ —Å—Ç–æ–∏—Ç –Ω–∞–ø–∏—Å–∞—Ç—å
# 
# 
#     
# <div class="alert alert-warning">
# 
# 
# –°–æ–≤–µ—Ç: 
# 
# 
# - —à–ø–∞—Ä–≥–∞–ª–∫–∞
# 
# ![avatar](https://www.ok-t.ru/studopediaru/baza17/1942458671852.files/image012.gif)
# </div>
# 
# 
# 
# 
# </div>
# 
# 

# <a id='sec6'></a>
# ## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤

# In[53]:


market_all_new = market_all_new.replace(['–°–Ω–∏–∑–∏–ª–∞—Å—å', '–ü—Ä–µ–∂–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å'], [1, 0])
market_all_new.head(10)


# <div class="alert alert-danger">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –û—à–∏–±–∫–∞ ‚ùå:
# 
# 
# 
# –°—É–¥—è –ø–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–¥–∞—á–∏ –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç "—Å–Ω–∏–∑–∏–ª–æ—Å—å", –∞ –∑–Ω–∞—á–∏—Ç –∫–æ–¥–∏—Ä—É–µ–º —ç—Ç–æ –µ–¥–∏–Ω–∏—Ü–µ–π
#     
#     
#     
# <div class="alert alert-warning">
# 
# –°–æ–≤–µ—Ç:
# 
# 
# –¢–æ–≥–¥–∞ —É –Ω–∞—Å –±–∏–Ω–∞—Ä–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç–æ –º–µ—Ç—Ä–∏–∫–∏ presicion, recall, f1 —Å—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª–∫–æ –ø–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–º—É –∫–ª–∞—Å—Å—É. –ü–æ—ç—Ç–æ–º—É —ç—Ç–æ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ. –ö—Ä–æ–º–µ —Ç–æ–≥–æ predict_proba –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–≤–∞ —Å—Ç–æ–ª–±—Ü—ã, –µ—Å–ª–∏ –º—ã –≤—Ä—É—á–Ω—É—é –∑–∞–∫–æ–¥–∏—Ä—É–µ–º –Ω—É–∂–Ω—ã–π –∫–ª–∞—Å—Å –µ–¥–∏–Ω–∏—á–∫–æ–π, —Ç–æ –µ–≥–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —ç—Ç–æ –≤—Ç–æ—Ä–æ–π —Å—Ç–æ–ª–±–µ—Ü. –í –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±–∂–∏–≥–∞–ª–∏—Å—å –Ω–∞ —ç—Ç–æ–º, –ø–æ–ª—É—á–∞—è –º–µ—Ç—Ä–∏–∫–∏  –∏ –º–∞—Ç—Ä–∏—Ü—É –æ—à–∏–±–æ–∫ –ø–æ "–Ω–µ –≤–∫—É—Å–Ω–æ–µ" –º–æ–ª–æ–∫–æ. –í–æ—Ç –Ω–∞ —Ç–∞–∫–æ–π –º–æ–º–µ–Ω—Ç —Ö–æ—Ç–µ–ª –±—ã –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ         

# In[54]:


RANDOM_STATE = 42
TEST_SIZE = 0.25

X_train, X_test, y_train, y_test = train_test_split(
    market_all_new.drop('–ü–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å', axis=1),
    market_all_new['–ü–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å'],
    test_size = TEST_SIZE,
    random_state=RANDOM_STATE,
    stratify = market_all_new['–ü–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å']
) 
ohe_columns = [
    '–ü–æ–ø—É–ª—è—Ä–Ω–∞—è_–∫–∞—Ç–µ–≥–æ—Ä–∏—è',    
]
ord_columns = [
    '–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞',
    '–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–∞—Ç—å'    
]    
num_columns = [
    '–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å',
    '–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å',
    '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
    '–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏',
    '–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç',
    '–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª',
    '–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞',
    '–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç',
    '–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞',
    '–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞',
    '–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞',
    '–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã',
    '–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'   
]
ohe_pipe = Pipeline(
    [('simpleImputer_ohe', SimpleImputer(missing_values=np.nan, strategy='most_frequent')),
        ('ohe', OneHotEncoder(drop='first', handle_unknown='error'))
    ]
    )
ord_pipe = Pipeline(
    [('simpleImputer_before_ord', SimpleImputer(missing_values=np.nan, strategy='most_frequent')),
        ('ord', OrdinalEncoder(
                categories=[
                    ['–ø—Ä–µ–º–∏—É–º', '—Å—Ç–∞–Ω–¥–∞—Ä—Ç'],
                    ['–¥–∞', '–Ω–µ—Ç']
                    ],
                handle_unknown='use_encoded_value', unknown_value=np.nan
            )
        ),
    ('simpleImputer_after_ord', SimpleImputer(missing_values=np.nan, strategy='most_frequent'))
    ]
)  
data_preprocessor = ColumnTransformer(
    [
        ('ohe', ohe_pipe, ohe_columns),
        ('ord', ord_pipe, ord_columns),
        ('num', MinMaxScaler(), num_columns)
    ],
    remainder='passthrough'
)
pipe_final= Pipeline(
    [
        ('preprocessor', data_preprocessor),
        ('models', DecisionTreeClassifier(random_state=RANDOM_STATE))
    ]
)  

param_grid = [
    {
        'models': [DecisionTreeClassifier(random_state=RANDOM_STATE)],
        'models__max_depth': range(2, 10),
        'models__max_features': range(2, 10),
        'preprocessor__num': [StandardScaler(), MinMaxScaler(), 'passthrough']  
    },
    {
        'models': [KNeighborsClassifier()],
        'models__n_neighbors': range(2, 10),
        'preprocessor__num': [StandardScaler(), MinMaxScaler(), 'passthrough']   
    },
    {
        'models': [LogisticRegression(
            random_state=RANDOM_STATE, 
            solver='liblinear', 
            penalty='l1'
        )],
        'models__C': range(1, 10),
        'preprocessor__num': [StandardScaler(), MinMaxScaler(), 'passthrough']  
    }
]
randomized_search = RandomizedSearchCV(
    pipe_final, 
    param_grid, 
    cv=5,
    scoring='roc_auc',
    n_jobs=-1
)    
randomized_search.fit(X_train, y_train)

print('–õ—É—á—à–∞—è –º–æ–¥–µ–ª—å –∏ –µ—ë –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:\n\n', randomized_search.best_estimator_)
print ('–ú–µ—Ç—Ä–∏–∫–∞ –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ:', randomized_search.best_score_)

y_test_pred = randomized_search.predict_proba(X_test)[:, 1]
print(f'–ú–µ—Ç—Ä–∏–∫–∞ ROC-AUC –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ: {roc_auc_score(y_test, y_test_pred)}')


# ROC-AUC –ø–æ–∑–≤–æ–ª–∏—Ç —Ö–æ—Ä–æ—à–æ –æ—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –±–∏–Ω–∞—Ä–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏.

# <div class="alert alert-warning">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –°–æ–≤–µ—Ç ü§î:
# 
# 
#  
# - –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è ROC-AUC? –í–æ-–ø–µ—Ä–≤—ã—Ö –æ–Ω–∞ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ—Ä–æ–≥–∞, –∞ –≤–æ-–≤—Ç–æ—Ä—ã—Ö –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç accuracy –∞–¥–µ–∫–≤–∞—Ç–Ω–æ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑ –¥–∞–∂–µ –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º –¥–∏—Å–±–∞–ª–∞–Ω—Å–µ
#     
#     
#     
# - –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ randomized_search.best_score_  - —ç—Ç–æ –º–µ—Ç—Ä–∏–∫–∞ –Ω–∞ –∫—Ä–æ—Å—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏  

# 
# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –£—Å–ø–µ—Ö üëç:
# 
# 
# 
# –¢—É—Ç –≤—Å—ë –ª–æ–≥–∏—á–Ω–æ
# 
#   
# 
# 
# 
# <div class="alert alert-warning">
# 
# 
# 
# –°–æ–≤–µ—Ç ü§î:
# 
# 
# 
# 
# –í –±—É–¥—É—â–µ–º –ø—Ä–∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–º–µ–Ω—Ç—ã:
# 
# 
# - OrdinalEncoder –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞ –∏–º–µ—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ (–Ω–∏–∑–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/–≤—ã—Å–æ–∫–∏–π, –º–∞–π–æ—Ä/–ø–æ–ª–∫–æ–≤–Ω–∏–∫/–≥–µ–Ω–µ—Ä–∞–ª), –∏–Ω–∞—á–µ –º–æ–¥–µ–ª—å –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –Ω–∞–π—Ç–∏ –∫–∞–∫–∏–µ —Ç–æ –ø–æ—Ä—è–¥–∫–æ–≤—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ—Ç
#     
# - –µ—Å–ª–∏ —É –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ One-Hot Encoding –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–æ–ª—å—à–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –Ω–æ–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, —ç—Ç–æ —É—Å–ª–æ–∂–Ω–∏—Ç —Ä–∞–±–æ—Ç—É –º–æ–¥–µ–ª–µ–π
#     
# - —É catboost –∏ lighgbm –µ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞—Ç—å –∫–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
#     
# - –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –¥–ª—è –ª–∏–Ω–µ–π–Ω—ã—Ö –∏ –º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö (–º–æ–¥–µ–ª–∏ –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∏–∑–º–µ—Ä—è–µ—Ç—Å—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ) –º–æ–¥–µ–ª–µ–π  –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–µ–º Scaler, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –º–æ–¥–µ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–µ—Ä–µ–≤—å–µ–≤ —Ä–µ—à–µ–Ω–∏–π, –¥–ª—è –Ω–∏—Ö Scaler –Ω–µ –Ω—É–∂–µ–Ω
#         
# 
# –ú–æ–∂–µ—à—å –ø–æ–¥—É–º–∞—Ç—å –Ω–∞–¥ –≤–æ–ø—Ä–æ—Å–æ–º –ø–æ—á–µ–º—É –¥–ª—è –ª–∏–Ω–µ–π–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ OrdinalEncoder –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –±–æ–ª—å—à–µ –ø—Ä–æ–±–ª–µ–º —á–µ–º –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ª–µ—Å–∞  –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –º–æ–¥–µ–ª–µ–π –≤ –æ—Å–Ω–æ–≤–µ –∫–æ—Ç–æ—Ä—ã—Ö –ª–µ–∂–∞—Ç –¥–µ—Ä–µ–≤—å—è —Ä–µ—à–µ–Ω–∏–π  
# 
#     

# 
# <div class="alert alert-danger">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –û—à–∏–±–∫–∞ ‚ùå:
# 
# 
# 
# 
# 
# 
# - —Å—á—Ç–∞–µ–º roc_auc_score –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π - —ç—Ç–æ –Ω–∞—à–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
#     
#     
#     
# -  —Ö–æ—Ä–æ—à–æ –±—ã –æ–±–æ—Å–Ω–æ–≤–∞—Ç—å  –≤—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫–∏    
# 
# 
# 
#     print ('–ú–µ—Ç—Ä–∏–∫–∞ –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ:', randomized_search.best_score_)
#     
# - —ç—Ç–æ –Ω–µ–≤–µ—Ä–Ω–æ .best_score_ —ç—Ç–æ –ú–µ—Ç—Ä–∏–∫–∞ –ø–æ –∫—Ä–æ—Å—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –º—ã –Ω–µ –≤—ã–±–∏—Ä–∞–µ–º –ª—É—á—à—É—é –º–æ–¥–µ–ª—å –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π –≤—ã–±–æ—Ä–∫–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ –≤–∑—è—Ç—å –¥–µ—Ä–µ–≤–æ —Ä–µ—à–µ–Ω–∏–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π –≥–ª—É–±–∏–Ω—ã, —Ç–æ –º–µ—Ç—Ä–∏–∫–∞ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–π –±—É–¥–µ—Ç —Ä–∞–≤–Ω–∞ 100%, –Ω–æ —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –æ–±–æ–±—â–µ–Ω–∏—è. –†–∞–Ω—å—à–µ –±—ã–ª –ø—Ä–æ–µ–∫—Ç "–≤–µ–¥–µ–Ω–∏—è –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ", –≥–¥–µ —á—ë—Ç–∫–æ –æ–± —ç—Ç–æ–º —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–æ—Å—å - –æ–±—É—á–∞–µ–º—Å—è –Ω–∞ train, –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–±–∏—Ä–∞–µ–º –ø–æ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ (–≤ —Å–ª—É—á–∞–∏ GS –∫—Ä–æ—Å—Å–≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω–æ–π), –∞ –∑–∞—Ç–µ–º –ø—Ä–æ–≤–æ–¥–∏–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –í –ø—Ä–µ–∂–Ω–µ–º –ø—Ä–æ–µ–∫—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç—ã –≤—Ä—É—á–Ω—É—é —Ä–∞–∑–±–∏–≤–∞–ª–∏ –Ω–∞ —Ç—Ä–∏ –≤—ã–±–æ—Ä–∫–∏ –∏ –≤ —Ü–∏–∫–ª–µ –ø–æ–¥–±–∏—Ä–∞–ª–∏ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∞ —Å–µ–π—á–∞—Å —Å—Ä–∞–∑—É GS, –Ω–æ –æ–Ω –¥–µ–ª–∞–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ: —Ç—ã –ø–æ–¥–∞—ë—à—å –Ω–µ–≥–æ X_train, –∏ –æ–Ω –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è —Ä–∞–∑–±–∏–≤–∞–µ—Ç –µ–≥–æ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—É—é –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—É—é (–ø—Ä–∏—á–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)... –í –æ–±—â–µ–º —Ç–∞–∫–æ–π –º–æ–º–µ–Ω—Ç–∏–∫ –ú–æ–∂–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [—Ç—É—Ç](https://towardsdatascience.com/why-do-we-need-a-validation-set-in-addition-to-training-and-test-sets-5cf4a65550e0) —Å –ø–æ–º–æ—â—å—é VPN –æ –ª–æ–≥–∏–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—ã–±–æ—Ä–æ–∫
# 
# 
# 
# 

# <div class="alert alert-danger">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V3</b></font>
# 
# 
# 
# –û—à–∏–±–∫–∞ ‚ùå:
# 
# 
# ROC-AUC —Å—á–∏—Ç–∞–µ–º —á–µ—Ä–µ–∑ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
# 
# 
#     
#     randomized_search.predict(X_test)  -----> randomized_search.predict_proba(X_test)[:, 1]
#     
#  

# <a id='sec7'></a>
# ## –ê–Ω–∞–ª–∏–∑ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

# In[60]:


X_train_p = pd.DataFrame(
    data_preprocessor.fit_transform(X_train),
    columns = data_preprocessor.get_feature_names_out()
)
X_test_p = pd.DataFrame(
    data_preprocessor.fit_transform(X_train),
    columns = data_preprocessor.get_feature_names_out()
)
X_train_p


# <div class="alert alert-warning">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –°–æ–≤–µ—Ç ü§î:
# 
# 
# –ü–æ–ø—Ä–æ–±—É–π    
#     
#     !pip install -U scikit-learn
# 
#     
# —Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º —è–¥—Ä–∞    

# In[61]:


explainer = shap.LinearExplainer(randomized_search.best_estimator_[1], X_test_p)
shap_values = explainer(X_test_p)
shap.plots.bar(shap_values)


# In[62]:


shap.plots.beeswarm(shap_values, max_display=16) 


# In[63]:


shap.plots.waterfall(shap_values[181]) 


# –í—ã–≤–æ–¥ –æ –ø—Ä–∏–∑–Ω–∞–∫–∞—Ö:
# –ü—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏–ª—å–Ω–µ–µ –≤—Å–µ–≥–æ –≤–ª–∏—è—é—Ç –Ω–∞ —Ü–µ–ª–µ–≤–æ–π –ø—Ä–∏–∑–Ω–∞–∫: 
# - –ü–æ–ø—É–ª—è—Ä–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è 
# - –°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–∞ –≤–∏–∑–∏—Ç
# - –°—Ç—Ä–∞–Ω–∏—Ü –∑–∞ –≤–∏–∑–∏—Ç 
# - –ê–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏
# - –¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü –º–∏–Ω—É—Ç—ã
# - –ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã —à—Ç—É–∫ –∫–≤–∞—Ä—Ç–∞–ª
# –ü—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–∞–±–æ –≤–ª–∏—è—é—Ç –Ω–∞ —Ü–µ–ª–µ–≤–æ–π –ø—Ä–∏–∑–Ω–∞–∫:
# - –í—ã—Ä—É—á–∫–∞ –∑–∞ –≤—Å–µ –º–µ—Å—è—Ü–∞
# - –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
# - –¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞
# - –†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–∞—Ç—å
# - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
# 
# –û—Ç—Ç–∞–ª–∫–∏–≤–∞—è—Å—å –æ—Ç —Å–∞–∫–º—ã—Ö –∑–Ω–∞—á–∏–º—ã—Ö –ø—Ä–∏–∑–∞–∫–æ–≤, –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –≤–ª—è–µ—Ç –Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–Ω–∏–∂–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤, –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Å–∏–ª—å–Ω–æ –≤–ª–∏—è—é—Ç –∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏, –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ –∏ –ø–æ–ø—É–ª—è—Ä–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –º—ã –±–µ—Ä–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∫–ª–∏–µ–Ω—Ç–∞, –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ª–∏—á–Ω–æ –¥–ª—è –Ω–µ–≥–æ –∞–∫—Ü–∏—é –¥–ª—è –µ–≥–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞ —Ç–∞–∫–∂–µ –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö –≤ –∫–æ—Ä–∑–∏–Ω–µ, —ç—Ç–∏ —Ñ–∞–∫—Ç–æ—Ä—ã –¥–æ–ª–∂–Ω—ã –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ —Å–∫–∞–∑–∞—Ç—å—Å—è –Ω–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

#   
#     
# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –£—Å–ø–µ—Ö üëç:
# 
# 
# 
# - –ü–æ—Å—Ç—Ä–æ–µ–Ω –≥—Ä–∞—Ñ–∏–∫ –≤–∞–∂–Ω–æ—Å—Ç–∏ —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –≥—Ä–∞—Ñ–∏–∫ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π
#     
#     
# - –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤—ã–≤–æ–¥—ã –æ —Ç–æ–º, –∫–∞–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã —Å–∏–ª—å–Ω–µ–µ/—Å–ª–∞–±–µ–µ –≤–ª–∏—è—é—Ç
#     
# 	
# - –ü–ª—é—Å –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ .beeswarm    
#     
#     
#     
#     
# <div class="alert alert-warning">
# 
# 
# 
# –°–æ–≤–µ—Ç ü§î:
#    
# 
# 	
# - –º–æ–∂–Ω–æ –∏ –ø–æ-–¥—Ä—É–≥–æ–º—É –æ—Ü–µ–Ω–∏—Ç—å –≤–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é [.feature_importance](https://inria.github.io/scikit-learn-mooc/python_scripts/dev_features_importance.html) (–Ω–æ –Ω–µ –∑–∞–±—ã–≤–∞–µ–º —á—Ç–æ –≤ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –Ω–∞–¥–æ —É—á–µ—Å—Ç—å –ª–æ–≥–∞—Ä–∏—Ñ–º –≤ —Ñ—É–Ω–∫—Ü–∏—è –æ—à–∏–±–∫–∏). –ò–ª–∏ —Å –ø–æ–º–æ—â—å—é [Permutation Importance](https://scikit-learn.org/stable/modules/permutation_importance.html)	
# 	

# <a id='sec8'></a>
# ## –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π

# 
# <div class="alert alert-warning">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# 
# 
# –°–æ–≤–µ—Ç:
# 
# 
# 
# 
# –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ —Å—Ç—É–¥–µ–Ω—Ç —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞–∫ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—é, –Ω–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ä–∞–º–∫–∏ –≤—Å—ë-—Ç–∞–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
#     
#     
# 
# 
# 1. 
#     
# –í—ã–±–∏—Ä–∞–µ–º —Å–µ–≥–º–µ–Ω—Ç –∏ –æ–±—ä—è—Å–Ω—è–µ–º –ø–æ—á–µ–º—É –º—ã –µ–≥–æ –≤—ã–±—Ä–∞–ª–∏. –¢—É—Ç –¥–µ–ª–∞–µ–º —É–ø–æ—Ä –Ω–∞ –±–∏–∑–Ω–µ—Å - —Å–æ—Å—Ç–∞–≤–ª—è—é—â—É—é (–º—ã –≤–µ–¥—å –≤—Å–µ–º —ç—Ç–∏–º –∑–∞–Ω–∏–º–∞–µ–º—Å—è –Ω–µ –≤ —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–æ–º –≤–∞–∫—É—É–º–µ, –∞ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏) –∏ –ª–æ–≥–∏–∫—É. –ü—Ä–∏–º–µ—Ä:
# 
# 
#     "–Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –±–æ–≥–∞—Ç–µ–Ω—å–∫–∏–µ –∫–ª–∏–µ–Ω—Ç—ã, –ø–æ—ç—Ç–æ–º—É...", "–Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —Ç–µ –¥–ª—è –∫–æ–≥–æ –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–ª–∞ –≤—ã—Å–æ–∫—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Ö–æ–¥–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ...", "–Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –±–æ–≥–∞—Ç–µ–Ω—å–∫–∏–µ –∏ —É—Ö–æ–¥—è—â–∏–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ..."
# 
# 
# 
# - –ò–ª–∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–µ–º—Å—è –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ü–µ–Ω–∫–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤. –ü—Ä–∏–º–µ—Ä:
# 
# 
#     "–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ –Ω–µ –ø–æ–∫–∞–∑–∞–ª–∏ –≤—ã—Å–æ–∫—É—é –∑–Ω–∞—á–∏–º–æ—Å—Ç—å –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö shap, –Ω–æ –µ—Å–ª–∏ –ø—Ä–∏–≥–ª—è–¥–µ—Ç—å—Å—è, —Ç–æ yf –≥—Ä–∞—Ñ–∏–∫–µ beeswarm –º—ã –≤–∏–¥–∏–º –æ—á–µ–Ω—å —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: –≤—ã—Å–æ–∫–∏–µ –∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∏–∫–∏ - –≤—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–Ω–∏–∂–µ–Ω–∏—è, –∑–Ω–∞—á–∏—Ç –º—ã –º–æ–∂–µ–º..." 
# 
# 
# 
#     
#     
# 2.    
#     
# –£ –Ω–∞—Å –µ—Å—Ç—å —Ñ–∞–π–ª money, –≤ –Ω–µ–º —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤. –≠—Ç–æ –Ω–∞–≤–µ—Ä–Ω–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞: –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –º–Ω–æ–≥–æ –ø–æ–∫—É–ø–∞—Ç—å, –Ω–æ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å –æ—Ç –Ω–µ–≥–æ –±—É–¥–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–π, –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –º–∞–ª–æ –ø–æ–∫—É–ø–∞—Ç—å, –Ω–æ –æ–Ω –ø–æ–∫—É–ø–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –º–∞–≥–∞–∑–∏–Ω—É –≤—ã–≥–æ–¥–Ω–æ. –ß—É–≤—Å—Ç–≤—É–µ—à—å —Ä–∞–∑–Ω–∏—Ü—É?! –°—Ç–æ–∏—Ç –æ–±–æ–≥–∞—Ç–∏—Ç—å –Ω–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
#     
#     
#     
#     
# 3.
# 
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ –∏–Ω–∞—á–µ –∑–∞—á–µ–º –º—ã –≤—Å–µ —ç—Ç–æ –¥–µ–ª–∞–ª–∏?!  –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç predict_proba –ø–æ—Å–º–æ—Ç—Ä–µ–≤ –Ω–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –≤ —Ç–æ–º —á—Ç–æ –∫–ª–∏–µ–Ω—Ç —Å–Ω–∏–∂–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å - –≤–æ—Ç –∏ –≤–∞—Ä–∏–∞–Ω—Ç —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏.  –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (–µ—Å–ª–∏ –º–æ–¥–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫ –≤–∞–∂–Ω—ã–º –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Ç–æ –ª–æ–≥–∏—á–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –Ω–µ–≥–æ –ø–æ–±–ª–∏–∂–µ). –ú–æ–∂–Ω–æ –ø—Ä–∏–≥–ª—è–¥–µ—Ç—å—Å—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∏ shap.beeswarm, —É–≤–∏–¥–µ–≤ —Ç–∞–º —á—Ç–æ —Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ. –ò–ª–∏ –º–æ–∂–Ω–æ –≤—Å–µ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ.  –ö—Å—Ç–∞—Ç–∏ –º–æ–∂–Ω–æ –ø–æ–¥–≥–ª—è–¥–µ—Ç—å –≤–Ω—É—Ç—Ä—å –º–æ–¥–µ–ª–µ–π –Ω–µ —Ç–æ–ª—å–∫–æ —Å –ø–æ–º–æ—â—å—é shap, –Ω–æ –∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å [plot_tree](https://scikit-learn.org/stable/modules/generated/sklearn.tree.plot_tree.html) –∏ —Ç–∞–º –ø–æ–¥—Å–º–æ—Ç—Ä–µ—Ç—å  –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø–æ—Ä–æ–≥–∞–º–∏, —Å–¥–µ–ª–∞–≤ —É–ø–æ—Ä –Ω–∞ –ø—Ä–∏–∑–Ω–∞–∫–∏ - –ø—Ä–∏—á–∏–Ω—ã. –ù–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–≤   plot_tree –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å —á—Ç–æ –¥–ª—è —Ç–∞–∫–æ–π —Ç–æ –≥—Ä—É–ø–ø—ã —Ç–æ–≤–∞—Ä–æ–≤, –ø—Ä–∏ —Ç–∞–∫–æ–º —Ç–æ –∑–Ω–∞—á–µ–Ω–∏–∏ –∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫ –∏ –ø—Ä–∏ —Ç–∞–∫–æ–º —Ç–æ —Å–µ—Ä–≤–∏—Å–µ, –≤—ã—Å–æ–∫–∞ –¥–æ–ª—è –Ω–µ —Å–Ω–∏–∂–∞—é—â–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ (–Ω–∏—á–µ–≥–æ —Ç–∞–∫–æ–≥–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ—Ç, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–º–µ—Ä). –ò –º—ã —Å–º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
# 
# –ù–æ, –µ—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å —á—Ç–æ–±—ã –ø—Ä–∏–≥–ª—è–¥–µ—Ç—å—Å—è –∫ –∫–∞–∫–∏–º —Ç–æ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏, —Ç–æ —Å—Ç–æ–∏—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å  "–ø—Ä–∏–∑–Ω–∞–∫–∏ - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä", –∏ "–ø—Ä–∏–∑–Ω–∞–∫–∏ - –ø—Ä–∏—á–∏–Ω—ã", –∞ –≤ —Ä–∞–∑–¥–µ–ª–µ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–º –Ω—É–∂–Ω–æ –¥–∞—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —Ç–æ –µ—Å—Ç—å —É–ø–æ—Ä –Ω–∞–¥–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å –Ω–∞ "–ø—Ä–∏–∑–Ω–∞–∫–∏ - –ø—Ä–∏—á–∏–Ω—ã", —Ç–æ –µ—Å—Ç—å –Ω–∞ —Ç–æ —á—Ç–æ –º—ã –º–æ–∂–µ–º –ø–æ–≤–ª–∏—è—Ç—å - –∞–∫—Ü–∏–∏, —Å–µ—Ä–≤–∏—Å, —á–∏—Å–ª–æ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ  –∏—Ç–ø. –∏—Ç–¥   
# 
#     
# 
# 
# 4. 
#     
# 
#     
# 
# - –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Å–µ–≥–º–µ–Ω—Ç–∞ –º—ã –º–æ–∂–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É—Å—Ä–µ–¥–Ω–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ–ø–∞–≤—à–∏—Ö –≤ –Ω–µ–≥–æ, –Ω–æ —Å–∞–º–∏ –ø–æ —Å–µ–±–µ —Ü–∏—Ñ—Ä—ã –Ω–∞—Å –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç, –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ä–∞–∑–Ω–∏—Ü–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –Ω–µ –ø–æ–ø–∞–≤—à–∏–º–∏ –≤ —Å–µ–≥–º–µ–Ω—Ç. –ø–æ—ç—Ç–æ–º—É —Å—Ç–æ–∏—Ç –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç, —É–∫–∞–∑–∞—Ç—å –Ω–∞ –µ–≥–æ –æ—Ç–ª–∏—á–∏—è –æ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã—Ö. –¥–ª—è —ç—Ç–æ–≥–æ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥—É—Ç –≥—Ä–∞—Ñ–∏–∫–∏ countplot/pie (–¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö) –∏ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É –∏–ª–∏ boxplot (–¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö), –∞ —Ä–∞–∑–±–∏–≤–∫–µ "–Ω–∞—à —Å–µ–≥–º–µ–Ω—Ç" - "–Ω–µ –Ω–∞—à —Å–µ–≥–º–µ–Ω—Ç"
#     
#     
# - –ê –µ—â—ë –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –¥–∏–Ω–∞–º–∏–∫–µ,  —É –Ω–∞—Å –µ—Å—Ç—å –∏ —ç—Ç–∞ —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è
# 
# 
# 
# 5.
#     
# –ò –≤ –∫–æ–Ω—Ü–µ —Å–æ—Å—Ç–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ - –∏–Ω–∞—á–µ –¥–ª—è —á–µ–≥–æ –º—ã –≤—Å—ë —ç—Ç–æ –¥–µ–ª–∞–ª–∏!?  –ü—Ä–∏ —ç—Ç–æ–º  –≤—ã–≤–æ–¥—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –æ–±—â–∏–º–∏, –Ω–∞–ø—Ä–º–∏–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ "–ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∞–∫—Ü–∏—é", —ç—Ç–æ —Å–ª–∏—à–∫–æ–º –æ–±—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ª—É—á—à–µ —É–∫–∞–∑–∞—Ç—å –¥–ª—è –∫–æ–≥–æ, –ø–æ –∫–∞–∫–æ–π –≥—Ä—É–ø–ø–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏—Ç–ø –∏—Ç–¥
#     
#     
#     
# 
#     
# 
# 
# –í–æ—Ç –ø–µ—Ä–µ—á–µ–Ω—å –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤:
# 
# - –ì—Ä—É–ø–ø–∞ –∫–ª–∏–µ–Ω—Ç–æ–º —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º–∏ –∞–∫—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø–æ–∫—É–ø–∫–∞–º–∏ –∏ –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é —Å–Ω–∏–∂–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
# - –ì—Ä—É–ø–ø–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫—É–ø–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏–∫—É (–ø–æ–∫—É–ø–∞—é—Ç —Ç–æ–≤–∞—Ä—ã —Å –¥–ª–∏–Ω–Ω—ã–º –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º)
# - –ì—Ä—É–ø–ø–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫—É–ø–∞—é—Ç —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–¢–æ–≤–∞—Ä—ã –¥–ª—è —Å–µ–±—è" (–º–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ —Ç–∞–∫—É—é –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–∏—Ö) –∏–ª–∏ "–¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–µ—Ç–µ–π".
# - –ì—Ä—É–ø–ø–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é —Å–Ω–∏–∂–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–∏–±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å—é
# 
# –°–∞–º—ã–π –æ—á–µ–≤–∏–¥–Ω—ã–π –∏ –Ω–∞–≤–µ—Ä–Ω–æ–µ –ª–æ–≥–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç - —ç—Ç–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–µ–≥–º–µ–Ω—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é —Å–Ω–∏–∂–µ–Ω–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–∏–±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å—é. –¢—É—Ç —Å—Ö–æ–¥–∏—Ç—Å—è –≤—Å—ë - –∏ –±–∏–∑–Ω–µ—Å–æ–≤–∞—è —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º)
# 
# 
# 
# 
# 
#     

# –î–æ–±–∞–≤–∏–º —Å—Ç–æ–ª–±–µ—Ü –ø—Ä–∏–±—ã–ª—å –≤ –Ω–∞—à –∏—Ç–æ–≥–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç

# In[66]:


market_final = market_all.merge(money, on=['id'])
market_final['–ü—Ä–∏–±—ã–ª—å'].describe()


# In[67]:


market_final.head()


# –í —Å–≤–æ–µ–π –∑–∞–¥–∞—á–µ —è —Ö–æ—á—É –ø–æ—Å—Ç–∞—Ä–∞—Ç—å—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–æ–≥–∞—Ç—ã—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π, –ø–æ—ç—Ç–æ–º—É –æ–±—Ä–∞—Ç–∏–º –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏ –±–æ–ª—å—à–µ 4.67 –∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–°–Ω–∏–∑–∏–ª–∞—Å—å), –æ—Ç–±–µ—Ä–µ–º —ç—Ç–∏—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π

# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V2</b></font>
# 
# 
# 
# –£—Å–ø–µ—Ö üëç:
# 
# 
# 
# –õ–æ–≥–∏—á–Ω–æ
# 

# In[68]:


market_final_new = market_final[market_final['–ü—Ä–∏–±—ã–ª—å'] > 4.67]
market_final_new = market_final_new[market_final_new['–ü–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å'] == '–°–Ω–∏–∑–∏–ª–∞—Å—å']
market_final_new = market_final_new.reset_index(drop=True)
market_final_new.head(10)


# <div class="alert alert-warning">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V2</b></font>
# 
# 
# 
# –°–æ–≤–µ—Ç ü§î:
# 
# 
# 
# –í–æ–æ–±—â–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –º–æ–¥–µ–ª–∏ 
# 

# –°–¥–µ–ª–∞–µ–º –µ—â–µ –æ–¥–∏–Ω –¥–∞—Ç–∞—Å–µ—Ç, –∫—É–¥–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ —Å –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å—é –Ω–µ –ø–æ–ø–∞–¥—É—Ç

# <div class="alert alert-warning">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V2</b></font>
# 
# 
# 
# –°–æ–≤–µ—Ç ü§î:
# 
# 
# 
# –ö—Å—Ç–∞—Ç–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–∞–∫–∏—Ö –∂–µ –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –Ω–æ –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–¥–µ–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç —á—Ç–æ –∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è. –¢–∞–∫ –º—ã –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å—Ä–∞–≤–Ω–∏–º–æ–µ
# 

# In[69]:


market_final_un = market_final[market_final['–ü—Ä–∏–±—ã–ª—å'] < 4.67]
market_final_un.head()


# In[70]:


market_final_new['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ —Ç–∏–ø–µ —Å–µ—Ä–≤–∏—Å–∞ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_final_new['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'].value_counts())
plt.show()
market_final_un['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ —Ç–∏–ø–µ —Å–µ—Ä–≤–∏—Å–∞', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_final_un['–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞'].value_counts())
plt.show()


# –ü–æ –ø—Ä–∏–∑–Ω–∞–∫—É "–¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞", —Ä–∞–∑–ª–∏—á–∏–π –Ω–µ –±—ã–ª–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

# In[71]:


market_final_new['–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–∞—Ç—å'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏—Å—ã–ª–∞—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ —Ç–æ–≤–∞—Ä–µ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_final_new['–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–∞—Ç—å'].value_counts())
plt.show()
market_final_un['–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–∞—Ç—å'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏—Å—ã–ª–∞—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ —Ç–æ–≤–∞—Ä–µ', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_final_un['–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–∞—Ç—å'].value_counts())
plt.show()


# –ü–æ –ø—Ä–∏–∑–Ω–∞–∫—É "–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–∞—Ç—å", —Ä–∞–∑–ª–∏—á–∏–π –Ω–µ –±—ã–ª–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

# In[72]:


market_final_new.hist('–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å', bins=10, figsize=(10,7))
plt.xlabel('–°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –∫–æ–º–ø–∞–Ω–∏–∏ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()

print(market_final_new['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å'].describe())

market_final_un.hist('–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å', bins=10, figsize=(10,7))
plt.xlabel('–°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –∫–æ–º–ø–∞–Ω–∏–∏')
plt.show()

print(market_final_un['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_6_–º–µ—Å'].describe())


# –í –ø—Ä–∏–∑–Ω–∞–∫–µ "–ú–∞—Ä–∫–µ—Ç –∞–∫—Ç–∏–≤ 6 –º–µ—Å" —Ä–∞–∑–Ω–∏—Ü–∞ –≤ —Å—Ä–µ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—â—É—Ç–∏–º–∞, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

# In[73]:


market_final_new.hist('–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å', bins=3, figsize=(10,7))
plt.xlabel('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –≤ —Ç–µ–∫—É—â–µ–º –º–µ—Å—è—Ü–µ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()

print(market_final_new['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å'].describe())

market_final_un.hist('–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å', bins=3, figsize=(10,7))
plt.xlabel('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –≤ —Ç–µ–∫—É—â–µ–º –º–µ—Å—è—Ü–µ')
plt.show()

print(market_final_un['–ú–∞—Ä–∫–µ—Ç_–∞–∫—Ç–∏–≤_—Ç–µ–∫_–º–µ—Å'].describe())


# –¢—É—Ç –æ—Ç–ª–∏—á–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã –ø—Ä–∏–∑–Ω–∞–∫ –Ω–µ –±–µ—Ä–µ–º

# In[74]:


market_final_new.hist('–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', bins=20, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–æ—à–ª–æ —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –Ω–∞ —Å–∞–π—Ç–µ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()

print(market_final_new['–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å'].describe())

market_final_un.hist('–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', bins=100, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–æ—à–ª–æ —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –Ω–∞ —Å–∞–π—Ç–µ')
plt.show()

print(market_final_un['–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å'].describe())


# –í –ø—Ä–∏–∑–Ω–∞–∫–µ "–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å" –æ—Ç–ª–∏—á–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ 

# In[75]:


market_final_new.hist('–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏', bins=15, figsize=(10,7))
plt.xlabel('–°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–∞—è –¥–æ–ª—è –ø–æ–∫—É–ø–æ–∫ –ø–æ –∞–∫—Ü–∏–∏ –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –ø–æ–∫—É–ø–æ–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()

print(market_final_new['–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏'].describe())

market_final_un.hist('–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏', bins=15, figsize=(10,7))
plt.xlabel('–°—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–∞—è –¥–æ–ª—è –ø–æ–∫—É–ø–æ–∫ –ø–æ –∞–∫—Ü–∏–∏ –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –ø–æ–∫—É–ø–æ–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤')
plt.show()

print(market_final_un['–ê–∫—Ü–∏–æ–Ω–Ω—ã–µ_–ø–æ–∫—É–ø–∫–∏'].describe())


# –°—Ä–µ–¥–Ω—è—è –¥–æ–ª—è "–ê–∫—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫" —É –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π —Å –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—é –Ω–∏–∂–µ, —á–µ–º —É –æ—Å—Ç–∞–ª—å–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏, —ç—Ç–æ—Ç –ø—Ä–∏–∑–Ω–∞–∫ —Å—Ç–æ–∏—Ç –≤–∑—è—Ç—å –≤–æ –≤–Ω–∏–º–∞–Ω–∏–µ

# In[76]:


market_final_new['–ü–æ–ø—É–ª—è—Ä–Ω–∞—è_–∫–∞—Ç–µ–≥–æ—Ä–∏—è'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ —Å–∞–º–æ–π –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_final_new['–ü–æ–ø—É–ª—è—Ä–Ω–∞—è_–∫–∞—Ç–µ–≥–æ—Ä–∏—è'].value_counts())
plt.show()
market_final_un['–ü–æ–ø—É–ª—è—Ä–Ω–∞—è_–∫–∞—Ç–µ–≥–æ—Ä–∏—è'].value_counts().plot(title='–î–∞–Ω–Ω—ã–µ –æ —Å–∞–º–æ–π –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞', kind='pie', autopct = '%1.0f%%', figsize=(7,7))
display(market_final_un['–ü–æ–ø—É–ª—è—Ä–Ω–∞—è_–∫–∞—Ç–µ–≥–æ—Ä–∏—è'].value_counts())
plt.show()


# –í —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–ø—É–ª—è—Ä–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä—è", —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —É —Å–µ–≥–º–µ–Ω—Ç–∞ –±–æ–≥–∞—Ç—ã—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –≤—Ç–æ—Ä–∞—è –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥—Ä—É–≥–æ–π –≤—ã–±–æ—Ä–∫–∏, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å

# In[77]:


market_final_new.hist('–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç', bins=6, figsize=(10,7))
plt.xlabel('–°–∫–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª –∑–∞ –≤–∏–∑–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ—Å—è—Ü–∞ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()

print(market_final_new['–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç'].describe())

market_final_un.hist('–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç', bins=6, figsize=(10,7))
plt.xlabel('–°–∫–æ–ª—å–∫–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª –∑–∞ –≤–∏–∑–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ—Å—è—Ü–∞')
plt.show()

print(market_final_un['–°—Ä–µ–¥–Ω–∏–π_–ø—Ä–æ—Å–º–æ—Ç—Ä_–∫–∞—Ç–µ–≥–æ—Ä–∏–π_–∑–∞_–≤–∏–∑–∏—Ç'].describe())


# –í –ø—Ä–∏–∑–Ω–∞–∫–µ "–°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–∞ –≤–∏–∑–∏—Ç", –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ —É –Ω–∞—à–µ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∏–∂–µ, —á–µ–º —É –æ—Å—Ç–∞–ª—å–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –¥–ª—è –Ω–∞—à–µ–π –≤—ã–±–æ—Ä–∫–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è –º–µ–Ω—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –∏ –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã –±–æ–ª–µ–µ —É–∑–∫–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ

# In[78]:


market_final_new.hist('–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª', bins=10, figsize=(10,7))
plt.xlabel('–û–±—â–µ–µ —á–∏—Å–ª–æ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()

print(market_final_new['–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª'].describe())

market_final_un.hist('–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª', bins=10, figsize=(10,7))
plt.xlabel('–û–±—â–µ–µ —á–∏—Å–ª–æ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞')
plt.show()

print(market_final_un['–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ_–ø—Ä–æ–¥—É–∫—Ç—ã_—à—Ç—É–∫_–∫–≤–∞—Ä—Ç–∞–ª'].describe())


# –ü–æ –ø—Ä–∏–∑–Ω–∞–∫—É "–ù–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã —à—Ç—É–∫ –∫–≤–∞—Ä—Ç–∞–ª" –≤–∏–¥–Ω–æ, —á—Ç–æ —É –Ω–∞—à–µ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–æ–ª—å—à–µ, —Ç–æ–∂–µ –±—É–¥–µ–º —É—á–∏—Ç—ã–≤–∞—Ç—å 

# In[79]:


market_final_new.hist('–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞', bins=8, figsize=(10,7))
plt.xlabel('–ß–∏—Å–ª–æ —Å–±–æ–µ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ—Å–Ω—É–ª–∏—Å—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –≤–æ –≤—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è —Å–∞–π—Ç–∞ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()

print(market_final_new['–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞'].describe())

market_final_un.hist('–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞', bins=10, figsize=(10,7))
plt.xlabel('–ß–∏—Å–ª–æ —Å–±–æ–µ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ—Å–Ω—É–ª–∏—Å—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –≤–æ –≤—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è —Å–∞–π—Ç–∞')
plt.show()

print(market_final_un['–û—à–∏–±–∫–∞_—Å–µ—Ä–≤–∏—Å–∞'].describe())


# –ü–æ –æ—à–∏–±–∫–∞–º —Å–µ—Ä–≤–∏—Å–∞ –æ—Ç–ª–∏—á–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã

# In[80]:


market_final_new.hist('–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç', bins=10, figsize=(10,7))
plt.xlabel('–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –∑–∞ –æ–¥–∏–Ω –≤–∏–∑–∏—Ç –Ω–∞ —Å–∞–π—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()

print(market_final_new['–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç'].describe())

market_final_un.hist('–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç', bins=10, figsize=(10,7))
plt.xlabel('–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –∑–∞ –æ–¥–∏–Ω –≤–∏–∑–∏—Ç –Ω–∞ —Å–∞–π—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞')
plt.show()

print(market_final_un['–°—Ç—Ä–∞–Ω–∏—Ü_–∑–∞_–≤–∏–∑–∏—Ç'].describe())


# –í –ø—Ä–∏–∑–Ω–∞–∫–µ "–°—Ç—Ä–∞–Ω–∏—Ü –∑–∞ –≤–∏–∑–∏—Ç" –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ —É –Ω–∞—à–µ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞, —Å—Ä–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≥–æ—Ä–∞–∑–¥–æ –º–µ–Ω—å—à–µ, —á–µ–º —É –æ—Å—Ç–∞–ª—å–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏, —ç—Ç–æ –≤ –±—É–¥—É—â–µ–º —É—á—Ç–µ–º

# In[81]:


market_final_new.hist('–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=20, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()
print(market_final_new['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())
market_final_un.hist('–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=20, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()
print(market_final_un['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())


# In[ ]:


market_final_new.hist('–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=20, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()
print(market_final_new['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())
market_final_un.hist('–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=20, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()
print(market_final_un['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())


# In[ ]:


market_final_new.hist('–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=5, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()
print(market_final_new['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())
market_final_un.hist('–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞', bins=5, figsize=(10,7))
plt.xlabel('–°—É–º–º–∞ –≤—ã—Ä—É—á–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥')
plt.show()
print(market_final_un['–í—Ç–æ—Ä–æ–π_–º–µ—Å—è—Ü_–≤—ã—Ä—É—á–∫–∞'].describe())


# In[ ]:


–ü–æ –¥–∞–Ω–Ω—ã–º –æ –≤—ã—Ä—É—á–∫–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞ –≤–∏–¥–Ω–æ, —á—Ç–æ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–≤–µ—Ä–º–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ


# In[ ]:


market_final_new.head()


# In[ ]:


market_final_new.hist('–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã', bins=10, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ, –≤ –º–∏–Ω—É—Ç–∞—Ö (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()
print(market_final_new['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'].describe())
market_final_un.hist('–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã', bins=15, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ, –≤ –º–∏–Ω—É—Ç–∞—Ö')
plt.show()
print(market_final_un['–¢–µ–∫—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'].describe())


# In[ ]:


market_final_new.hist('–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã', bins=10, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ, –≤ –º–∏–Ω—É—Ç–∞—Ö (–ë–æ–≥–∞—Ç—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)')
plt.show()
print(market_final_new['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'].describe())
market_final_un.hist('–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã', bins=20, figsize=(10,7))
plt.xlabel('–ó–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ, –≤ –º–∏–Ω—É—Ç–∞—Ö')
plt.show()
print(market_final_un['–ü—Ä–µ–¥—ã–¥—É—â–∏–π_–º–µ—Å—è—Ü_–º–∏–Ω—É—Ç—ã'].describe())


# –ü–æ –¥–∞–Ω–Ω—ã–º —Å –æ–±—â–∏–º –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –≤ –º–µ—Å—è—Ü–µ –≤–∏–¥–Ω–æ, —á—Ç–æ –Ω–∞—à —Å–µ–≥–º–µ–Ω—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç–µ

# –û—Ç—Ç–∞–ª–∫–∏–≤–∞—è—å –æ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö –æ –¥–≤—É—Ö —Å–µ–≥–º–µ–Ω—Ç–∞—Ö, –º–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è –Ω–∞—à–µ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∫–ª–∏–µ–Ω—Ç–∞, –∞ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö –≤ –∫–æ—Ä–∑–∏–Ω–µ, –µ—â–µ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –æ–Ω —á–∞—â–µ –∑–∞—Ö–æ–¥–∏–ª –Ω–∞ —Å–∞–π—Ç –∏ –ø—Ä–æ–≤–æ–¥–∏–ª –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –Ω–∞—à–µ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

# <div class="alert alert-success">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V2</b></font>
# 
# 
# 
# –£—Å–ø–µ—Ö üëç:
# 
# 
# 
# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–¥–µ–ª–∞–Ω—ã
# 

# <a id='sec9'></a>
# ## –û–±—â–∏–π –≤—ã–≤–æ–¥

# - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω ¬´–í –æ–¥–∏–Ω –∫–ª–∏–∫¬ª –ø—Ä–æ–¥–∞—ë—Ç —Ä–∞–∑–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã: –¥–ª—è –¥–µ—Ç–µ–π, –¥–ª—è –¥–æ–º–∞, –º–µ–ª–∫—É—é –±—ã—Ç–æ–≤—É—é —Ç–µ—Ö–Ω–∏–∫—É, –∫–æ—Å–º–µ—Ç–∏–∫—É –∏ –¥–∞–∂–µ –ø—Ä–æ–¥—É–∫—Ç—ã. –û—Ç—á—ë—Ç –º–∞–≥–∞–∑–∏–Ω–∞ –∑–∞ –ø—Ä–æ—à–ª—ã–π –ø–µ—Ä–∏–æ–¥ –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –Ω–∞—á–∞–ª–∞ —Å–Ω–∏–∂–∞—Ç—å—Å—è. –ü—Ä–∏–≤–ª–µ–∫–∞—Ç—å –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ —É–∂–µ –Ω–µ —Ç–∞–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ: –æ –º–∞–≥–∞–∑–∏–Ω–µ –∏ —Ç–∞–∫ –∑–Ω–∞–µ—Ç –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏. –í–æ–∑–º–æ–∂–Ω—ã–π –≤—ã—Ö–æ–¥ ‚Äî —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤. –°–¥–µ–ª–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.\
# - ¬´–í –æ–¥–∏–Ω –∫–ª–∏–∫¬ª ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è, –ø–æ—ç—Ç–æ–º—É –µ—ë —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –Ω–µ —Ö–æ—á–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ ‚Äî —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è. –£ –∫–æ–º–ø–∞–Ω–∏–∏ –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç–¥–µ–ª —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –∏ –≤–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –ø–æ–±—ã—Ç—å –≤ —Ä–æ–ª–∏ —Å—Ç–∞–∂—ë—Ä–∞ –≤ —ç—Ç–æ–º –æ—Ç–¥–µ–ª–µ.\
# - –ò—Ç–∞–∫, –≤–∞—à–µ–º—É –æ—Ç–¥–µ–ª—É –ø–æ—Ä—É—á–∏–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å –∏—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.\
# - –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:\
# market_file.csv\
# –¢–∞–±–ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –Ω–∞ —Å–∞–π—Ç–µ, –æ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è—Ö —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–º –∏ –µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–º –ø–æ–≤–µ–¥–µ–Ω–∏–∏.\
# market_money.csv\
# –¢–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –≤—ã—Ä—É—á–∫–µ, –∫–æ—Ç–æ—Ä—É—é –ø–æ–ª—É—á–∞–µ—Ç –º–∞–≥–∞–∑–∏–Ω —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è, —Ç–æ –µ—Å—Ç—å —Å–∫–æ–ª—å–∫–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –≤—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—Ç–∏–ª –∑–∞ –ø–µ—Ä–∏–æ–¥ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–∞–π—Ç–æ–º.\
# market_time.csv\
# –¢–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –≤—Ä–µ–º–µ–Ω–∏ (–≤ –º–∏–Ω—É—Ç–∞—Ö), –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –ø—Ä–æ–≤—ë–ª –Ω–∞ —Å–∞–π—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞.\
# money.csv\
# –¢–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —Å—Ä–µ–¥–Ω–µ–º–µ—Å—è—á–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞: –∫–∞–∫—É—é –ø—Ä–∏–±—ã–ª—å –ø–æ–ª—É—á–∞–µ—Ç –º–∞–≥–∞–∑–∏–Ω –æ—Ç –ø—Ä–æ–¥–∞–∂ –∫–∞–∂–¥–æ–º—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—é.\
# –ë—ã–ª–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö, –ø–æ–∏—Å–∫ –ø—Ä–æ–ø—É—Å–∫–æ–≤, —è–≤–Ω—ã—Ö –∏ –Ω–µ—è–≤–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Å—Ç–æ–ª–±—Ü—ã.\
# –î–ª—è –ø–æ–∏—Å–∫–∞ –ª—É—á—à–µ –º–æ–¥–µ–ª–∏ –±—ã–ª –Ω–∞–ø–∏—Å–∞–Ω –ø–∞–π–ø–ª–∞–π–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —á–µ—Ç—ã—Ä–µ—Ö –º–æ–¥–µ–ª–µ–π, –¥–≤—É–º—è —Å–∫–µ–π–ª–µ—Ä–∞–º–∏ –∏ –¥–≤—É–º—è —ç–Ω–∫–æ–¥–µ—Ä–∞–º–∏, —Å –ø–æ–º–æ—â—å—é —Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π –∏ –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞ –ª—É—á—à–∞—è (LogisticRegression(C=3, penalty='l1', random_state=42, solver='liblinear')\
# –ü–æ—Å–ª–µ –≤—Å–µ–π –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±—ã–ª–∞ –ø—Ä–µ–¥–æ–∂–µ–Ω–∞ –±–∏–∑–Ω–µ—Å –∏–¥–µ—è:\
# –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è –Ω–∞—à–µ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∫–ª–∏–µ–Ω—Ç–∞, –∞ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö –≤ –∫–æ—Ä–∑–∏–Ω–µ, –µ—â–µ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –æ–Ω —á–∞—â–µ –∑–∞—Ö–æ–¥–∏–ª –Ω–∞ —Å–∞–π—Ç –∏ –ø—Ä–æ–≤–æ–¥–∏–ª –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –Ω–∞—à–µ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

# 
# <div class="alert alert-info">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞</b></font>
# 
# (–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ —á—Ç–æ –ø—Ä–æ–ø–∞–ª –º–æ–π –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –≤–æ–∑–º–æ–∂–Ω–æ –∫–∞–∫–æ–π-—Ç–æ —Å–±–æ–π, –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª—é —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫)
# 
#     
#     
# –ß—Ç–æ —Å—Ç–æ–∏—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å
#     
#     
#     
# - –Ω–µ –∑–∞–±—ã–≤–∞–µ–º –Ω–∞–ø–∏—Å–∞—Ç—å –≤–≤–µ–¥–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç
#  
#     
#     
# - —É–±–∏—Ä–∞–µ–º –∞–Ω–æ–º–∞–ª–∏–∏    
#  
#     
# - –¥–æ–ø–∏—Å—ã–≤–∞–µ–º –≤—ã–≤–æ–¥—ã –ø–æ –º–∞—Ç—Ä–∏—Ü–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏    
#     
#     
#     
#     
# - –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç "—Å–Ω–∏–∂–µ–Ω–∏–µ",  —ç—Ç–æ –∏ –µ—Å—Ç—å –Ω–∞—à –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å, –ø–æ—ç—Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –µ–µ 1, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø—É—Ç–∞–Ω–∏—Ü—ã
# 
# 
#     
# 
# 
# - –æ–±—ä—è—Å–Ω—è–µ–º –ø–æ—á–µ–º—É –≤—ã–±—Ä–∞–ª–∏ —Ç—É –∏–ª–∏ –∏–Ω—É—é –º–µ—Ç—Ä–∏–∫—É
#     
#     
# - –≤ —Ç—Ä–µ–Ω–∞–∂–µ—Ä–µ –±—ã–ª–∞ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—å, .best_score_ —ç—Ç–æ –º–µ—Ç—Ä–∏–∫–∞ –ø–æ –∫—Ä–æ—Å—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏
# 
# 
#     
# - —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏, –ø—Ä–æ–≤–æ–¥–∏–º –µ—ë —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
# 
# 
#     
#     
# - –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø—Ä–æ–µ–∫—Ç, –ø–∏—à–µ–º –æ–±—â–∏–π –≤—ã–≤–æ–¥    

# 
# <div class="alert alert-info">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V2</b></font>
# 
# –°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–∞–±–æ—Ç—É –°–µ—Ä–≥–µ–π!    
# 
#     
# –ö—Ä–∞—Å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, —Ö–æ—Ç—è –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ best_score_, –≤—Å—ë-—Ç–∞–∫–∏ —Å—Ç–æ–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞–∑—ã–≤–∞—Ç—å —á—Ç–æ —Å—á–∏—Ç–∞—é—Ç —ç—Ç–æ–¥ –º–µ—Ç–æ–¥
# 
# 
# –û—Ç–ø—Ä–∞–≤–ª—è—é –Ω–∞ 3 –∏—Ç–µ—Ä–∞—Ü–∏—é —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –±–æ–ª—å—à–µ –Ω–µ—Ç. –ù–∞ —Å–≤—è–∑–∏    
# 

# 
# <div class="alert alert-info">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V3</b></font>
# 
# 
# 
# –ï—â—ë —Ä–∞–∑ –ø–æ—Å–º–æ—Ç—Ä–µ–ª —Ç–≤–æ—é —Ä–∞–±–æ—Ç—É, –ø—Ä–æ–ø—É—Å—Ç–∏–ª –æ—à–∏–±–∫—É - –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ —Ç—ã –ø–æ—Å—á–∏—Ç–∞–ª –º–µ—Ç—Ä–∏–∫—É roc-auc, –Ω–æ –Ω–µ–≤–µ—Ä–Ω–æ. –ü–æ–¥—Å–∫–∞–∑–∞–ª –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
#     

# 
# <div class="alert alert-info">
# <font size="5"><b>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–≤—å—é–µ—Ä–∞V4</b></font>
# 
# –°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–∞–±–æ—Ç—É!    
# 
#  
# –ö—Ä–∞—Å–Ω–æ–≥–æ –Ω–µ—Ç, –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç, –∑–Ω–∞—á–∏—Ç –≤—Å–µ, –ø–æ—Ä–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å) –ù–∞–¥–µ—é—Å—å –º–æ–∏ —Å–æ–≤–µ—Ç—ã –∏ –≤–æ–ø—Ä–æ—Å–∏–∫–∏ –±—ã–ª–∏ –ø–æ–ª–µ–∑–Ω—ã –∏ –≤ –∫–æ–ø–∏–ª–æ—á–∫—É –∑–Ω–∞–Ω–∏–π —É–ø–∞–ª–æ —á—Ç–æ —Ç–æ –Ω–æ–≤–æ–µ, –∞ –ø—Ä–æ–µ–∫—Ç —Å—Ç–∞–ª –ª—É—á—à–µ, –∏ —Å–∏–º–ø–∞—Ç–∏—á–Ω–µ–π. 
# 
#   
# –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –°–µ—Ä–≥–µ–π. –ñ–µ–ª–∞—é —É—Å–ø–µ—Ö–æ–≤ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–π —É—á–µ–±–µ!
# 
# 

# In[ ]:




